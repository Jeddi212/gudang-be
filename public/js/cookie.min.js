function decodeJWT(e){return JSON.parse(atob(e.split(".")[1]))}function getCookie(e){let t=encodeURIComponent(e)+"=",r=document.cookie.split(";");for(let n=0;n<r.length;n++){let o=r[n].trim();if(0===o.indexOf(t))return decodeURIComponent(o.substring(t.length))}return null}function addAuthorizationHeader(e){let t=getCookie("jwt");t&&e.detail.xhr.setRequestHeader("Authorization","Bearer "+t)}function getUser(){let e=getCookie("jwt");if(!e)return{name:"Guest",level:"GUEST"};{let t=decodeJWT(e);return t.payload}}function setUsername(){let e=document.getElementById("user-name");e.innerText=getUser().name}function addBusyLoader(e){e.target.setAttribute("aria-busy","true")}function removeBusyLoader(e){e.target.setAttribute("aria-busy","false")}htmx.on("htmx:beforeRequest",addAuthorizationHeader),htmx.on("htmx:beforeRequest",addBusyLoader),htmx.on("htmx:afterRequest",removeBusyLoader);
