function decodeJWT(e){return JSON.parse(atob(e.split(".")[1]))}function getCookie(e){let t=encodeURIComponent(e)+"=",r=document.cookie.split(";");for(let o=0;o<r.length;o++){let n=r[o].trim();if(0===n.indexOf(t))return decodeURIComponent(n.substring(t.length))}return null}function addAuthorizationHeader(e){let t=getCookie("jwt");t&&e.detail.xhr.setRequestHeader("Authorization","Bearer "+t)}function getUser(){let e=getCookie("jwt");if(!e)return{name:"Guest",level:"GUEST"};{let t=decodeJWT(e);return t.payload}}function setUsername(){let e=document.getElementById("user-name");e.innerText=getUser().name}function addBusyLoader(e){e.target.setAttribute("aria-busy","true")}function removeBusyLoader(e){e.target.setAttribute("aria-busy","false")}function logout(){let e=window.confirm("Are you sure you want to logout?");e&&(document.cookie="jwt=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href="/")}document.addEventListener("htmx:responseError",function(e){let t=e.detail.xhr.response,r=e.detail.target;r.innerHTML=t}),htmx.on("htmx:beforeRequest",addAuthorizationHeader),htmx.on("htmx:beforeRequest",addBusyLoader),htmx.on("htmx:afterRequest",removeBusyLoader);