function removeItem(e){if(confirm("Are you sure you want to remove this item?")){var t=document.getElementById("materialFields"),a=e.parentElement;t.removeChild(a)}}const collectForm=()=>{let e=document.getElementById("name").value,t=document.getElementById("description").value||"No description",a=Array.from(document.querySelectorAll(".material-item")).map(e=>({name:e.querySelector('[name="materialName[]"]').value,quantity:e.querySelector('[name="quantity[]"]').value}));return JSON.stringify({name:e,description:t,materials:a})};document.getElementById("productForm").addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("result");try{let a=collectForm(),r=e.target.action,n=document.querySelector('[name="_method"]').value,l=await fetch(r,{method:n,headers:{"Content-Type":"application/json"},body:a}),o=await l.json(),m=o.data.name;window.location.href=`/product/${m}`}catch(i){t.innerHTML=i}});
