function decodeJWT(e){return JSON.parse(atob(e.split(".")[1]))}function setCookie(e,o,n){let t=new Date(Date.now()+1e3*n);document.cookie=`${e}=${encodeURIComponent(o||"")}; expires=${t.toUTCString()}; path=/`}function handleLoginResponse(e){var o=JSON.parse(e.detail.xhr.response);let n=o.data;if(n){let t=decodeJWT(n).exp-Math.floor(Date.now()/1e3);setCookie("jwt",n,t),window.location.href="/"}else alert(o.message)}htmx.on("#login-form","htmx:afterRequest",handleLoginResponse);
